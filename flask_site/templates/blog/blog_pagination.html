{% set second_last_page = posts.pages - 1 %}
{% set current_page_plus_1 = posts.page + 1 %}
{% set current_page_plus_2 = posts.page + 2 %}
{% set current_page_minus_1 = posts.page - 1 %}
{% set current_page_minus_2 = posts.page - 2 %}


<div class=" text-center margin-30px-top sm-margin-20px-top wow fadeInUp">
    <div class="pagination text-small text-uppercase text-extra-dark-gray">
        <ul>

        {% if posts.has_prev %}

            <li>
                <a href="{{ url_for('blog.blog_page', page=posts.prev_num) }}">
                    <i class="fas fa-long-arrow-alt-left margin-5px-right"></i>Previous
                </a>
            </li>

            <li class="hidden-xs"><a href="?page=1">1</a></li>

            {% if posts.page == 3 %}
                <li class="hidden-xs"><a href="?page={{ current_page_minus_1 }}">{{ current_page_minus_1 }}</a></li>
            {% endif %}

            {% if posts.page > 3 %}
                {% if posts.page != 4%}
                    <li class="active hidden-xs"><a>...</a></li>
                {% endif %}

                <li class="hidden-xs"><a href="?page={{ current_page_minus_2 }}">{{ current_page_minus_2 }}</a></li>
                <li class="hidden-xs"><a href="?page={{ current_page_minus_1 }}">{{ current_page_minus_1 }}</a></li>

            {% endif %}

        {% endif %}

        <li class="active"><a>{{ posts.page }}</a></li>

        {% if posts.has_next %}
            {% if current_page_plus_1 < posts.pages %}

                <li  class="hidden-xs"><a href="?page={{ current_page_plus_1 }}">{{ current_page_plus_1 }}</a></li>

                {% if current_page_plus_2 <= second_last_page %}
                    <li  class="hidden-xs"><a href="?page={{ current_page_plus_2 }}">{{ current_page_plus_2 }}</a></li>

                    {% if current_page_plus_2 != second_last_page %}
                        <li class="active hidden-xs"><a>...</a></li>
                    {% endif %}

                {% endif %}

            {% endif %}

            <li class="hidden-xs">
                <a href="{{ url_for('blog.blog_page', page=posts.pages) }}">{{ posts.pages }}</a>
            </li>

            <li>
                <a href="{{ url_for('blog.blog_page', page=posts.next_num) }}">Next
                    <i class="fas fa-long-arrow-alt-right margin-5px-left"></i>
                </a>
            </li>
        {% endif %}
        </ul>

    </div>
</div>